{
  "puzzles": [
    {
      "title": "Three-Tier Web Application",
      "description": "Build a highly available three-tier web application architecture on AWS with proper security and networking components.",
      "puzzleType": "three_tier",
      "difficulty": "L2",
      "requirements": [
        "Application must be highly available across multiple AZs",
        "Database must be in a private subnet",
        "Web tier must be behind a load balancer",
        "All traffic from internet must go through the load balancer",
        "Private subnets must have outbound internet access for updates"
      ],
      "hints": [
        "Start with the VPC and subnet layout",
        "Consider which components need public vs private subnets",
        "Think about how traffic flows from users to the database"
      ],
      "tags": ["three-tier", "high-availability", "vpc"],
      "targetArchitecture": {
        "layers": ["presentation", "application", "data"],
        "components": {
          "networking": ["vpc", "public-subnet-1", "public-subnet-2", "private-subnet-1", "private-subnet-2", "igw", "nat"],
          "compute": ["alb", "ec2-1", "ec2-2"],
          "database": ["rds-primary", "rds-standby"],
          "security": ["sg-alb", "sg-ec2", "sg-rds"]
        }
      },
      "components": [
        {
          "componentType": "vpc",
          "componentName": "Main VPC",
          "expectedPosition": { "x": 400, "y": 50, "zone": "region" },
          "isRequired": true,
          "isProvided": true
        },
        {
          "componentType": "igw",
          "componentName": "Internet Gateway",
          "expectedPosition": { "x": 400, "y": 100, "zone": "region" },
          "expectedConnections": [
            { "targetItemId": "vpc", "connectionType": "attachment" }
          ],
          "isRequired": true
        },
        {
          "componentType": "subnet",
          "componentName": "Public Subnet AZ-1",
          "expectedPosition": { "x": 200, "y": 200, "zone": "az-1", "layer": "public" },
          "isRequired": true
        },
        {
          "componentType": "subnet",
          "componentName": "Public Subnet AZ-2",
          "expectedPosition": { "x": 600, "y": 200, "zone": "az-2", "layer": "public" },
          "isRequired": true
        },
        {
          "componentType": "subnet",
          "componentName": "Private Subnet AZ-1",
          "expectedPosition": { "x": 200, "y": 350, "zone": "az-1", "layer": "private" },
          "isRequired": true
        },
        {
          "componentType": "subnet",
          "componentName": "Private Subnet AZ-2",
          "expectedPosition": { "x": 600, "y": 350, "zone": "az-2", "layer": "private" },
          "isRequired": true
        },
        {
          "componentType": "nat",
          "componentName": "NAT Gateway",
          "expectedPosition": { "x": 200, "y": 250, "zone": "az-1", "layer": "public" },
          "isRequired": true
        },
        {
          "componentType": "alb",
          "componentName": "Application Load Balancer",
          "expectedPosition": { "x": 400, "y": 200, "layer": "public" },
          "expectedConnections": [
            { "targetItemId": "ec2-1", "connectionType": "network" },
            { "targetItemId": "ec2-2", "connectionType": "network" }
          ],
          "isRequired": true
        },
        {
          "componentType": "ec2",
          "componentName": "Web Server AZ-1",
          "expectedPosition": { "x": 200, "y": 400, "zone": "az-1", "layer": "private" },
          "expectedConnections": [
            { "targetItemId": "rds-primary", "connectionType": "network" }
          ],
          "isRequired": true
        },
        {
          "componentType": "ec2",
          "componentName": "Web Server AZ-2",
          "expectedPosition": { "x": 600, "y": 400, "zone": "az-2", "layer": "private" },
          "expectedConnections": [
            { "targetItemId": "rds-primary", "connectionType": "network" }
          ],
          "isRequired": true
        },
        {
          "componentType": "rds",
          "componentName": "RDS Primary",
          "expectedPosition": { "x": 300, "y": 500, "zone": "az-1", "layer": "data" },
          "isRequired": true
        },
        {
          "componentType": "rds",
          "componentName": "RDS Standby",
          "expectedPosition": { "x": 500, "y": 500, "zone": "az-2", "layer": "data" },
          "expectedConnections": [
            { "targetItemId": "rds-primary", "connectionType": "replication" }
          ],
          "isRequired": true
        }
      ]
    }
  ]
}